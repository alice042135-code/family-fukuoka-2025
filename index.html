<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0, viewport-fit=cover"
  />
  <title>family-fukuoka-2025</title>

  <!-- Vue 3 -->
  <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    .scrollbar-hide::-webkit-scrollbar { display: none; }
    .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }

    .sheet-enter-from,
    .sheet-leave-to {
      transform: translateY(100%);
      opacity: 0;
    }
    .sheet-enter-active,
    .sheet-leave-active {
      transition: 0.25s;
    }

    html, body {
      overscroll-behavior: none;
      background: #f2f2f2;
    }

    .card-shadow {
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06);
    }

    .line-clamp-1 {
      display: -webkit-box;
      -webkit-line-clamp: 1;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
  </style>
</head>

<body class="bg-[#F2F2F2] min-h-screen">
  <div id="app" class="w-full max-w-md mx-auto min-h-screen px-3 py-4">

    <!-- æ‰‹æ©Ÿå¤–æ¡† -->
    <div
      class="relative flex flex-col w-full h-[calc(100vh-40px)]
             bg-[#f8f8f8] border border-gray-300 shadow-xl
             rounded-3xl overflow-hidden"
    >

      <!-- é ‚éƒ¨ç‹€æ…‹åˆ— -->
      <div
        class="h-10 flex items-center justify-between px-4
               text-[11px] text-gray-600 border-b border-gray-200 bg-white"
      >
        <span class="font-semibold tracking-widest text-gray-900">
          FUKUOKA TRIP 2025
        </span>
        <span class="flex items-center gap-1">
          <span
            class="inline-block w-1.5 h-1.5 rounded-full bg-emerald-500"
          ></span>
          <span>2025/12/20â€“12/24</span>
        </span>
      </div>

      <!-- Header + æ—¥æœŸæ»‘å‹•åˆ— -->
      <header
        class="px-5 pt-3 pb-2 bg-gradient-to-b from-[#f7f7f7] to-[#efefef]
                   shrink-0 z-10 border-b border-gray-200"
      >
        <h1 class="text-lg font-semibold text-gray-900 tracking-tight">
          ç¦å²¡å®¶æ—æ—…éŠè¡Œç¨‹
        </h1>

        <p class="text-xs text-gray-500 mt-1">
          å·¦å³æ»‘å‹•åˆ‡æ›æ—¥æœŸï¼Œé»è¡Œç¨‹çœ‹äº®é»èˆ‡å‚™è¨»ã€‚
        </p>

        <!-- æ—¥æœŸæ»‘å‹•åˆ—è¡¨ -->
        <div class="mt-3 flex gap-2 overflow-x-auto scrollbar-hide pb-1">
          <button
            v-for="(day, index) in days"
            :key="day.id"
            @click="selectDay(day.id)"
            class="shrink-0 w-32 px-3 py-2 rounded-2xl text-left border
                   transition-all duration-150"
            :class="day.id === selectedDayId
              ? 'bg-[#DCDFF0] text-gray-900 border-gray-900 shadow-md'
              : 'bg-[#E6E6E6] text-gray-700 border-gray-300 hover:border-gray-500'"
          >
            <div class="flex items-center justify-between">
              <span
                class="text-[12px] uppercase tracking-widest font-semibold text-gray-800"
              >
                Day {{ index + 1 }}
              </span>

              <span
                v-if="dayWeathers[index]"
                class="text-[11px] text-gray-600"
              >
                {{ weatherEmoji(dayWeathers[index].code) }}
              </span>
            </div>

            <div class="text-[12px] mt-0.5 text-gray-800 font-medium">
              {{ day.dateLabel }}
            </div>

            <div
              v-if="dayWeathers[index]"
              class="mt-1 text-[11px] text-gray-700"
            >
              <span class="font-semibold text-gray-900">
                {{ Math.round(dayWeathers[index].max) }}Â°
              </span>
              / {{ Math.round(dayWeathers[index].min) }}Â°C
            </div>
            <div v-else class="mt-1 text-[11px] text-gray-500">
              è®€å–ä¸­â€¦
            </div>
          </button>
        </div>
      </header>

      <!-- ====================== -->
      <!-- è¡Œç¨‹åˆ—è¡¨ï¼ˆå…§éƒ¨å¯æ²å‹•ï¼‰ -->
      <!-- ====================== -->
      <main class="flex-1 overflow-y-auto scrollbar-hide px-4 py-3">

        <!-- æ¯å€‹è¡Œç¨‹å¡ç‰‡ -->
        <div
          v-for="evt in filteredEvents"
          :key="evt.id"
          @click="openSheet(evt)"
          class="relative flex bg-white rounded-xl border border-gray-200 card-shadow mb-3
                 active:scale-[0.98] cursor-pointer transition-all"
          :class="evt.type === 'transit' ? 'py-2 px-3' : 'py-3 px-4'"
        >
          <!-- å·¦å´è«è˜­è¿ªè‰²æ¢ -->
          <div
            class="w-[6px] rounded-full mr-3"
            :style="{ backgroundColor: barColor(evt.type) }"
          ></div>

          <!-- å³å´å…§å®¹ï¼ˆæ™‚é–“+ICONæ¬„ + æ–‡æ¡ˆæ¬„ï¼‰ -->
          <div class="flex-1 flex gap-3">

            <!-- å·¦æ¬„ï¼šæ™‚é–“ + ICON å‚ç›´ç½®ä¸­ -->
            <div class="w-[86px] flex flex-col items-center justify-center pt-1">
              <!-- æ™‚é–“ï¼ˆå¤§æ¨™é¡Œçš„ä¸€éƒ¨åˆ†ï¼‰ -->
              <div class="text-[13px] font-semibold text-gray-900 text-center">
                {{ evt.time }}
              </div>
              <!-- ICONï¼ˆç°¡ç´„ç·šæ¢ SVGï¼‰ -->
              <div class="mt-1">
                <!-- é£›æ©Ÿ -->
                <svg
                  v-if="evt.type === 'flight'"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.6"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="w-7 h-7"
                  :style="{ color: iconColor(evt.type) }"
                >
                  <path d="M10 21l1.5-4.5L8 13 5 14l-1-2.5 4-2.5L8 5.5 9.5 4l3 4 4-2.5c.7-.4 1.6-.1 2 .6.4.7.1 1.6-.6 2l-4 2.5 1 7L13 21l-2.5-3z" />
                </svg>

                <!-- è»Šç¨‹ -->
                <svg
                  v-else-if="evt.type === 'transit'"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.6"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="w-7 h-7"
                  :style="{ color: iconColor(evt.type) }"
                >
                  <rect x="3.5" y="8" width="17" height="7" rx="2" />
                  <path d="M7 18h1" />
                  <path d="M16 18h1" />
                  <circle cx="8" cy="17.5" r="1.2" />
                  <circle cx="16" cy="17.5" r="1.2" />
                </svg>

                <!-- åœç•™ -->
                <svg
                  v-else
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="1.6"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="w-7 h-7"
                  :style="{ color: iconColor(evt.type) }"
                >
                  <path d="M12 21s-5-5.2-5-9.2A5 5 0 0 1 17 11.8C17 15.8 12 21 12 21z" />
                  <circle cx="12" cy="11" r="2.2" />
                </svg>
              </div>
            </div>

            <!-- å³æ¬„ï¼šæ¨™é¡Œ / äº®é» / å‚™è¨» -->
            <div class="flex-1 flex flex-col justify-center">
              <!-- å¤§æ¨™é¡Œï¼šåœ°é»ï¼ˆè¡Œç¨‹ä¸»æ¨™ï¼‰ -->
              <div
                class="font-semibold text-gray-900"
                :class="evt.type === 'transit' ? 'text-[14px]' : 'text-[15px]'"
              >
                {{ evt.title }}
              </div>

              <!-- å°æ¨™é¡Œï¼šäº®é»ï¼ˆåªé¡¯ç¤ºä¸€å€‹ï¼‰ -->
              <div class="mt-1 text-[13px] text-gray-800 leading-snug">
                <span class="font-semibold text-gray-900">â­</span>
                <template v-if="evt.highlights && evt.highlights.length">
                  {{ evt.highlights[0] }}
                  <span
                    v-if="evt.highlights.length > 1"
                    class="text-gray-500"
                  >
                    ï¼ˆæ›´å¤šï¼‰
                  </span>
                </template>
                <template v-else>
                  <span class="text-gray-400">â€”</span>
                </template>
              </div>

              <!-- å‚™è¨»æ‘˜è¦ -->
              <div class="mt-1 text-[13px] text-gray-700 leading-snug">
                <span class="font-semibold text-gray-900">ğŸ”</span>
                <template v-if="evt.note && evt.note.length">
                  <span class="line-clamp-1">{{ evt.note }}</span>
                </template>
                <template v-else>
                  <span class="text-gray-400">â€”</span>
                </template>
              </div>
            </div>
          </div>
        </div>

        <!-- æ–°å¢è¡Œç¨‹æŒ‰éˆ• -->
        <button
          @click.stop="createNewEvent"
          class="w-full bg-white border border-gray-300 text-gray-700
                 rounded-xl py-3 mt-4 text-[14px] font-medium shadow-sm
                 active:scale-[0.98]"
        >
          ï¼‹ æ–°å¢è¡Œç¨‹
        </button>

      </main>

      <!-- ====================== -->
      <!-- åº•éƒ¨è³‡è¨Šé¢æ¿ï¼ˆå½ˆå‡ºå¼ï¼‰ -->
      <!-- ====================== -->
      <transition name="sheet">
        <div
          v-if="sheetEvent"
          class="fixed inset-x-0 bottom-0 z-50 bg-white rounded-t-3xl
                 border-t border-gray-300 shadow-xl pt-4 pb-6 px-5
                 max-w-md mx-auto"
        >

          <!-- æ‹–æ›³æ¢ -->
          <div class="w-12 h-1.5 bg-gray-300 rounded-full mx-auto mb-4"></div>

          <!-- æ¨™é¡Œ + æ™‚é–“ -->
          <h2 class="text-[17px] font-semibold text-gray-900">
            {{ sheetEvent.title }}
          </h2>
          <div class="text-gray-600 text-[14px] mt-1 mb-3">
            {{ sheetEvent.time }}
          </div>

          <!-- äº®é»ï¼ˆå®Œæ•´ï¼‰ -->
          <div class="mb-3">
            <h3 class="text-[14px] font-semibold text-gray-900 mb-1">
              â­ äº®é»
            </h3>
            <div
              v-if="sheetEvent.highlights && sheetEvent.highlights.length"
              class="text-[14px] text-gray-800 leading-relaxed"
            >
              <ul class="list-disc pl-5">
                <li v-for="h in sheetEvent.highlights" :key="h">
                  {{ h }}
                </li>
              </ul>
            </div>
            <div v-else class="text-[14px] text-gray-500">â€”</div>
          </div>

          <!-- å‚™è¨»ï¼ˆå®Œæ•´ï¼‰ -->
          <div class="mb-4">
            <h3 class="text-[14px] font-semibold text-gray-900 mb-1">
              ğŸ” å‚™è¨»
            </h3>
            <div
              v-if="sheetEvent.note"
              class="text-[14px] text-gray-800 leading-relaxed whitespace-pre-line"
            >
              {{ sheetEvent.note }}
            </div>
            <div v-else class="text-[14px] text-gray-500">â€”</div>
          </div>

          <!-- æŒ‰éˆ•åˆ— -->
          <div class="flex gap-3 mt-4">
            <button
              @click.stop="openInGoogleMap(sheetEvent)"
              class="flex-1 bg-[#4A72A0] text-white text-center py-3 rounded-xl
                     text-[15px] font-semibold active:scale-[0.97]"
            >
              ä½¿ç”¨ Google Maps
            </button>

            <button
              @click.stop="openEdit(sheetEvent)"
              class="flex-1 bg-[#E0D9EC] text-gray-900 text-center py-3 rounded-xl
                     text-[15px] font-semibold active:scale-[0.97]"
            >
              ç·¨ è¼¯
            </button>
          </div>

          <button
            @click="closeSheet"
            class="mt-4 w-full text-center text-gray-500 text-[13px]"
          >
            é—œé–‰
          </button>
        </div>
      </transition>

      <!-- ====================== -->
      <!-- ç·¨è¼¯é¢æ¿ï¼ˆå½ˆå‡ºï¼‰ -->
      <!-- ====================== -->
      <transition name="sheet">
        <div
          v-if="editingEvent"
          class="fixed inset-x-0 bottom-0 z-50 bg-white rounded-t-3xl
                 border-t border-gray-300 shadow-xl pt-4 pb-6 px-5
                 max-w-md mx-auto"
        >
          <div class="w-12 h-1.5 bg-gray-300 rounded-full mx-auto mb-4"></div>

          <h2 class="text-[17px] font-semibold text-gray-900 mb-3">
            ç·¨è¼¯è¡Œç¨‹
          </h2>

          <label class="block text-[13px] text-gray-600 mt-2 mb-1">
            æ¨™é¡Œ
          </label>
          <input
            v-model="editingEvent.title"
            class="w-full border border-gray-300 rounded-lg px-3 py-2 mb-2
                   text-[14px]"
          />

          <label class="block text-[13px] text-gray-600 mt-2 mb-1">
            æ™‚é–“
          </label>
          <input
            v-model="editingEvent.time"
            class="w-full border border-gray-300 rounded-lg px-3 py-2 mb-2
                   text-[14px]"
          />

          <label class="block text-[13px] text-gray-600 mt-2 mb-1">
            äº®é»ï¼ˆé€—è™Ÿåˆ†éš”ï¼‰
          </label>
          <input
            v-model="editingEvent.highlightsRaw"
            class="w-full border border-gray-300 rounded-lg px-3 py-2 mb-2
                   text-[14px]"
          />

          <label class="block text-[13px] text-gray-600 mt-2 mb-1">
            å‚™è¨»
          </label>
          <textarea
            v-model="editingEvent.note"
            rows="3"
            class="w-full border border-gray-300 rounded-lg px-3 py-2 mb-2
                   text-[14px]"
          ></textarea>

          <div class="flex gap-3 mt-4">
            <button
              @click="saveEdit"
              class="flex-1 bg-[#4A72A0] text-white py-3 rounded-xl text-[15px]
                     font-semibold active:scale-[0.97]"
            >
              å„² å­˜
            </button>
            <button
              @click="cancelEdit"
              class="flex-1 bg-gray-200 text-gray-700 py-3 rounded-xl text-[15px]
                     font-semibold active:scale-[0.97]"
            >
              å– æ¶ˆ
            </button>
          </div>
        </div>
      </transition>

    </div>
  </div>

  <script>
    const app = Vue.createApp({
      data() {
        return {
          selectedDayId: 1,
          days: [
            { id: 1, dateLabel: "12/20ï¼ˆå…­ï¼‰" },
            { id: 2, dateLabel: "12/21ï¼ˆæ—¥ï¼‰" },
            { id: 3, dateLabel: "12/22ï¼ˆä¸€ï¼‰" },
            { id: 4, dateLabel: "12/23ï¼ˆäºŒï¼‰" },
            { id: 5, dateLabel: "12/24ï¼ˆä¸‰ï¼‰" },
          ],
          events: [
            /* Day 1 */
            {
              id: 101,
              day: 1,
              type: "flight",
              time: "08:00â€“11:15",
              title: "é•·æ¦® BR106 æŠµé”ç¦å²¡",
              highlights: ["æµ·å¤–æŠµé”"],
              note: "å…¥å¢ƒã€å–è¡Œæ\nç‡Ÿæ¥­æ™‚é–“ï¼šç¦å²¡æ©Ÿå ´ 24 å°æ™‚",
              mapsQuery: "Fukuoka Airport",
            },
            {
              id: 102,
              day: 1,
              type: "stay",
              time: "12:00â€“13:30",
              title: "åšå¤šç”ºå±‹ãƒ»æ«›ç”°ç¥ç¤¾",
              highlights: ["ç¥‡åœ’å±±ç¬ æ­·å²é¤¨"],
              note: "è€è¡—æ•£ç­–\nç‡Ÿæ¥­æ™‚é–“ï¼š10:00â€“18:00",
              mapsQuery: "Kushida Shrine Hakata",
            },
            {
              id: 103,
              day: 1,
              type: "transit",
              time: "13:40â€“14:00",
              title: "æ«›ç”°ç¥ç¤¾ â†’ Blossom Hotel",
              highlights: [],
              note: "è»Šç¨‹ç´„ 20 åˆ†é˜",
              mapsQuery: "JR Kyushu Blossom Hotel Hakata",
            },
            {
              id: 104,
              day: 1,
              type: "stay",
              time: "14:00â€“16:30",
              title: "JR ä¹å· Blossom Hotel Check-in",
              highlights: ["å‘¨é‚Šè¦“é£Ÿæ–¹ä¾¿"],
              note: "ç‡Ÿæ¥­ï¼š24 å°æ™‚æ«ƒæª¯",
              mapsQuery: "JR Kyushu Blossom Hotel Hakata",
            },
            {
              id: 105,
              day: 1,
              type: "stay",
              time: "16:30â€“20:00",
              title: "åšå¤šé‹æ²³åŸ",
              highlights: ["è‡ªç”±é€›è¡—"],
              note: "ç‡Ÿæ¥­ï¼š10:00â€“21:00",
              mapsQuery: "Canal City Hakata",
            },

            /* Day 2 */
            {
              id: 201,
              day: 2,
              type: "transit",
              time: "09:30â€“10:00",
              title: "å‰å¾€æµ·ä¹‹ä¸­é“æµ·æ´‹ä¸–ç•Œ",
              highlights: [],
              note: "è»Šç¨‹ç´„ 30 åˆ†é˜",
              mapsQuery: "Marine World Uminonakamichi",
            },
            {
              id: 202,
              day: 2,
              type: "stay",
              time: "10:00â€“14:00",
              title: "æµ·ä¹‹ä¸­é“æµ·æ´‹ä¸–ç•Œ Marine World",
              highlights: ["æµ·è±¹ Go Go Seal"],
              note:
                "11:00 æµ·è±šè¡¨æ¼”\n12:45 ä¼éµéŠè¡Œ\n12:00â€“13:00 Reilly æµ·æ™¯é¤å»³\nç‡Ÿæ¥­ï¼š09:30â€“17:30",
              mapsQuery: "Marine World Uminonakamichi",
            },
            {
              id: 203,
              day: 2,
              type: "transit",
              time: "14:00â€“14:30",
              title: "æµ·æ´‹ä¸–ç•Œ â†’ å¤©ç¥ Parco",
              highlights: [],
              note: "è»Šç¨‹ç´„ 30 åˆ†é˜",
              mapsQuery: "Tenjin Parco Fukuoka",
            },
            {
              id: 204,
              day: 2,
              type: "stay",
              time: "14:30â€“20:00",
              title: "å¤©ç¥è¡—å€è‡ªç”±æ´»å‹•",
              highlights: ["è³¼ç‰©ã€è—¥å¦ã€ç¾å¦"],
              note: "ç‡Ÿæ¥­æ™‚é–“ä¾åº—å®¶ä¸åŒï¼Œå¤šæ•¸è‡³ 20:00",
              mapsQuery: "Tenjin Fukuoka",
            },
            {
              id: 205,
              day: 2,
              type: "transit",
              time: "20:00â€“20:30",
              title: "å¤©ç¥ â†’ Blossom é£¯åº—",
              highlights: [],
              note: "è»Šç¨‹ç´„ 20 åˆ†é˜",
              mapsQuery: "JR Kyushu Blossom Hotel Hakata",
            },

            /* Day 3 */
            {
              id: 301,
              day: 3,
              type: "stay",
              time: "08:00â€“08:30",
              title: "é£¯åº— Check-out",
              highlights: [],
              note: "æ•´ç†ä¸¦é€€æˆ¿\nç‡Ÿæ¥­ï¼š24 å°æ™‚æ«ƒæª¯",
              mapsQuery: "JR Kyushu Blossom Hotel Hakata",
            },
            {
              id: 302,
              day: 3,
              type: "transit",
              time: "08:30â€“10:30",
              title: "åšå¤š â†’ ä¹å·è‡ªç„¶å‹•ç‰©åœ’",
              highlights: [],
              note: "è»Šç¨‹ç´„ 2 å°æ™‚",
              mapsQuery: "African Safari Oita",
            },
            {
              id: 303,
              day: 3,
              type: "stay",
              time: "10:30â€“13:30",
              title: "ä¹å·è‡ªç„¶å‹•ç‰©åœ’ African Safari",
              highlights: ["å¢æ—å·´å£«"],
              note:
                "11:00 å¢æ—å·´å£«ï¼ˆ50 åˆ†ï¼‰\n12:00â€“13:00 åœ’å…§é¤å»³\nç‡Ÿæ¥­ï¼š09:00â€“17:00",
              mapsQuery: "African Safari Oita",
            },
            {
              id: 304,
              day: 3,
              type: "transit",
              time: "13:30â€“14:00",
              title: "å‹•ç‰©åœ’ â†’ æ¹¯å¸ƒé™¢æ˜­å’Œé¤¨",
              highlights: [],
              note: "è»Šç¨‹ç´„ 30 åˆ†é˜",
              mapsQuery: "Yufuin Showakan",
            },
            {
              id: 305,
              day: 3,
              type: "stay",
              time: "14:00â€“17:30",
              title: "æ¹¯ã®åªè¡—é“ï¼ˆæ¹¯å¸ƒé™¢ï¼‰",
              highlights: ["èŠ±å‰æ‘ã€æ©«ä¸ã€Snoopyåº—"],
              note: "å¤šæ•¸åº—å®¶ç‡Ÿæ¥­ 10:00â€“17:00",
              mapsQuery: "Yufuin, Oita",
            },
            {
              id: 306,
              day: 3,
              type: "transit",
              time: "17:30â€“18:00",
              title: "æ¹¯å¸ƒé™¢ â†’ åˆ¥åºœ",
              highlights: [],
              note: "è»Šç¨‹ç´„ 30 åˆ†é˜",
              mapsQuery: "Beppu Oita",
            },
            {
              id: 307,
              day: 3,
              type: "stay",
              time: "18:00â€“21:00",
              title: "Check-in è¥¿éµ Resort Inn åˆ¥åºœ",
              highlights: ["é£¯åº—å‘¨é‚Šç¾é£Ÿ"],
              note: "ç‡Ÿæ¥­ï¼š24 å°æ™‚æ«ƒæª¯",
              mapsQuery: "Nishitetsu Resort Inn Beppu",
            },

            /* Day 4 */
            {
              id: 401,
              day: 4,
              type: "stay",
              time: "10:00â€“10:10",
              title: "Resort Inn åˆ¥åºœ Check-out",
              highlights: [],
              note: "é€€æˆ¿\nç‡Ÿæ¥­ï¼š24 å°æ™‚æ«ƒæª¯",
              mapsQuery: "Nishitetsu Resort Inn Beppu",
            },
            {
              id: 402,
              day: 4,
              type: "transit",
              time: "10:10â€“12:10",
              title: "åˆ¥åºœ â†’ å¤ªå®°åºœå¤©æ»¿å®®",
              highlights: [],
              note: "è»Šç¨‹ç´„ 2 å°æ™‚",
              mapsQuery: "Dazaifu Tenmangu",
            },
            {
              id: 403,
              day: 4,
              type: "stay",
              time: "12:10â€“13:30",
              title: "å¤ªå®°åºœå¤©æ»¿å®® + åƒé“å•†åº—è¡—",
              highlights: ["æ¢…æé¤…"],
              note: "ç‡Ÿæ¥­ï¼š09:00â€“17:00",
              mapsQuery: "Dazaifu Tenmangu",
            },
            {
              id: 404,
              day: 4,
              type: "stay",
              time: "13:30â€“14:30",
              title: "å¤ªå®°åºœå‘¨é‚Šåˆé¤",
              highlights: ["åœ¨åœ°é¤å»³"],
              note: "ç‡Ÿæ¥­æ™‚é–“è¦–åº—å®¶è€Œå®š",
              mapsQuery: "Dazaifu",
            },
            {
              id: 405,
              day: 4,
              type: "stay",
              time: "14:30â€“16:30",
              title: "ä¹å·åœ‹ç«‹åšç‰©é¤¨",
              highlights: ["æ–‡åŒ–å±•é¤¨"],
              note: "ç‡Ÿæ¥­ï¼š09:30â€“17:00ï¼ˆé€±ä¸€ä¼‘é¤¨ï¼‰",
              mapsQuery: "Kyushu National Museum",
            },
            {
              id: 406,
              day: 4,
              type: "transit",
              time: "17:00â€“18:00",
              title: "å¤ªå®°åºœ â†’ ç¦å²¡å¤©ç¥æ˜†ç‰¹è–©é…’åº—",
              highlights: [],
              note: "è»Šç¨‹ç´„ 1 å°æ™‚",
              mapsQuery: "Quintessa Hotel Fukuoka Tenjin",
            },
            {
              id: 407,
              day: 4,
              type: "stay",
              time: "18:00â€“19:00",
              title: "Check-in ç¦å²¡å¤©ç¥æ˜†ç‰¹è–©é…’åº—",
              highlights: ["ä¼‘æ¯æ•´ç†"],
              note: "ç‡Ÿæ¥­ï¼š24 å°æ™‚æ«ƒæª¯",
              mapsQuery: "Quintessa Hotel Fukuoka Tenjin",
            },
            {
              id: 408,
              day: 4,
              type: "stay",
              time: "19:00â€“21:00",
              title: "ç¦å²¡å¡”",
              highlights: ["å¤œæ™¯ãƒ»æµ·æ¿±æ•£æ­¥"],
              note: "ç‡Ÿæ¥­ï¼š09:30â€“22:00",
              mapsQuery: "Fukuoka Tower",
            },

            /* Day 5 */
            {
              id: 501,
              day: 5,
              type: "stay",
              time: "11:00â€“11:10",
              title: "ç¦å²¡å¤©ç¥æ˜†ç‰¹è–©é…’åº— Check-out",
              highlights: [],
              note: "é€€æˆ¿\nç‡Ÿæ¥­ï¼š24 å°æ™‚æ«ƒæª¯",
              mapsQuery: "Quintessa Hotel Fukuoka Tenjin",
            },
            {
              id: 502,
              day: 5,
              type: "transit",
              time: "11:10â€“11:20",
              title: "é£¯åº— â†’ éºµåŒ…è¶…äººåšç‰©é¤¨",
              highlights: [],
              note: "è»Šç¨‹ç´„ 10 åˆ†é˜",
              mapsQuery: "Anpanman Museum Fukuoka",
            },
            {
              id: 503,
              day: 5,
              type: "stay",
              time: "11:20â€“12:30",
              title: "éºµåŒ…è¶…äººåšç‰©é¤¨",
              highlights: ["è¦ªå­æ‹ç…§é»"],
              note: "ç‡Ÿæ¥­ï¼š10:00â€“17:00ï¼ˆé€±äºŒä¼‘é¤¨ï¼‰",
              mapsQuery: "Anpanman Museum Fukuoka",
            },
            {
              id: 504,
              day: 5,
              type: "transit",
              time: "12:30â€“12:50",
              title: "éºµåŒ…è¶…äºº â†’ åšå¤šé˜ªæ€¥ç™¾è²¨",
              highlights: [],
              note: "è»Šç¨‹ç´„ 20 åˆ†é˜",
              mapsQuery: "Hakata Hankyu",
            },
            {
              id: 505,
              day: 5,
              type: "stay",
              time: "12:50â€“17:30",
              title: "åšå¤šé˜ªæ€¥ï¼ˆåˆé¤ï¼‹è³¼ç‰©ï¼‰",
              highlights: ["Dacomecca"],
              note: "ç‡Ÿæ¥­ï¼š10:00â€“20:00",
              mapsQuery: "Hakata Hankyu",
            },
            {
              id: 506,
              day: 5,
              type: "transit",
              time: "17:30â€“18:00",
              title: "åšå¤šé˜ªæ€¥ â†’ ç¦å²¡æ©Ÿå ´",
              highlights: [],
              note: "è»Šç¨‹ç´„ 20 åˆ†é˜",
              mapsQuery: "Fukuoka Airport",
            },
            {
              id: 507,
              day: 5,
              type: "flight",
              time: "20:55â€“22:40",
              title: "é•·æ¦® BR101 å›ç¨‹",
              highlights: ["è¿”å®¶"],
              note: "è«‹æå‰ 2 å°æ™‚è¾¦ç†ç™»æ©Ÿ\nç‡Ÿæ¥­ï¼šç¦å²¡æ©Ÿå ´ 24 å°æ™‚",
              mapsQuery: "Fukuoka Airport",
            },
          ],

          dayWeathers: [null, null, null, null, null],

          sheetEvent: null,
          editingEvent: null,
        };
      },

      computed: {
        filteredEvents() {
          return this.events.filter((e) => e.day === this.selectedDayId);
        },
      },

      methods: {
        selectDay(id) {
          this.selectedDayId = id;
          this.sheetEvent = null;
          this.editingEvent = null;
        },

        barColor(type) {
          if (type === "flight") return "#C8C2D6"; // é£›æ©Ÿï¼šè«è˜­è¿ªç´«ç°
          if (type === "transit") return "#C9D6C5"; // è»Šç¨‹ï¼šè«è˜­è¿ªç¶ ç°
          return "#BFC7DA";                         // åœç•™ï¼šè«è˜­è¿ªè—ç°
        },

        iconColor(type) {
          if (type === "flight") return "#6E6A85";
          if (type === "transit") return "#6A7A6A";
          return "#5E6A85";
        },

        openSheet(evt) {
          this.sheetEvent = JSON.parse(JSON.stringify(evt));
        },

        closeSheet() {
          this.sheetEvent = null;
        },

        openInGoogleMap(evt) {
          const q = encodeURIComponent(evt.mapsQuery || evt.title);
          window.open(
            `https://www.google.com/maps/search/?api=1&query=${q}`,
            "_blank"
          );
        },

        openEdit(evt) {
          this.editingEvent = JSON.parse(JSON.stringify(evt));
          this.editingEvent.highlightsRaw = evt.highlights.join(", ");
        },

        cancelEdit() {
          this.editingEvent = null;
        },

        saveEdit() {
          const target = this.events.find((e) => e.id === this.editingEvent.id);
          if (!target) return;
          target.title = this.editingEvent.title;
          target.time = this.editingEvent.time;
          target.note = this.editingEvent.note;
          target.highlights =
            this.editingEvent.highlightsRaw
              .split(",")
              .map((s) => s.trim())
              .filter((s) => s.length > 0);

          this.editingEvent = null;
          this.sheetEvent = null;
        },

        async fetchWeather() {
          try {
            const url =
              "https://api.open-meteo.com/v1/forecast" +
              "?latitude=33.5902&longitude=130.4017" +
              "&daily=weathercode,temperature_2m_max,temperature_2m_min" +
              "&timezone=Asia%2FTokyo";
            const res = await fetch(url);
            const data = await res.json();

            for (let i = 0; i < 5; i++) {
              this.dayWeathers[i] = {
                max: data.daily.temperature_2m_max[i],
                min: data.daily.temperature_2m_min[i],
                code: data.daily.weathercode[i],
              };
            }
          } catch (e) {
            console.error("weather error", e);
          }
        },

        weatherEmoji(code) {
          if (code === 0) return "â˜€ï¸";
          if ([1, 2, 3].includes(code)) return "â›…ï¸";
          if ([45, 48].includes(code)) return "ğŸŒ«";
          if ([51, 53, 55, 56, 57].includes(code)) return "ğŸŒ¦";
          if ([61, 63, 65].includes(code)) return "ğŸŒ§";
          if ([71, 73, 75].includes(code)) return "â„ï¸";
          if ([95, 96, 99].includes(code)) return "â›ˆ";
          return "ğŸŒ¤";
        },

        createNewEvent() {
          const newId = Date.now();
          const evt = {
            id: newId,
            day: this.selectedDayId,
            type: "stay",
            time: "æ™‚é–“å¾…å®š",
            title: "æ–°è¡Œç¨‹",
            highlights: [],
            note: "å‚™è¨»å¾…å¡«å¯«",
            mapsQuery: "Fukuoka",
          };
          this.events.push(evt);
          this.openEdit(evt);
        },
      },

      mounted() {
        this.fetchWeather();
      },
    });

    app.mount("#app");
  </script>
</body>
</html>
