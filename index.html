<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>family-fukuoka-2025</title>

  <!-- Vue 3 -->
  <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    .scrollbar-hide::-webkit-scrollbar { display: none; }
    .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }

    .sheet-enter-from, .sheet-leave-to {
      transform: translateY(100%);
      opacity: 0;
    }
    .sheet-enter-active, .sheet-leave-active {
      transition: 0.25s;
    }

    html, body { overscroll-behavior: none; }
    .card-shadow { box-shadow: 0 2px 6px rgba(0,0,0,0.06); }
  </style>
</head>

<body class="bg-[#F2F2F2] min-h-screen">
<div id="app" class="w-full max-w-md mx-auto min-h-screen px-3 py-4">

  <!-- æ‰‹æ©Ÿæ¡† -->
  <div class="relative flex flex-col w-full h-[calc(100vh-40px)]
              bg-[#f8f8f8] border border-gray-300 shadow-xl
              rounded-3xl overflow-hidden">

    <!-- é ‚éƒ¨ç‹€æ…‹åˆ— -->
    <div class="h-10 flex items-center justify-between px-4
                text-[11px] text-gray-600
                border-b border-gray-200 bg-white">
      <span class="font-semibold tracking-widest text-gray-900">
        FUKUOKA TRIP
      </span>
      <span class="flex items-center gap-1">
        <span class="inline-block w-1.5 h-1.5 rounded-full bg-emerald-500"></span>
        <span>2025/12/20â€“12/24</span>
      </span>
    </div>

    <!-- Header + æ—¥æœŸæ»‘å‹•åˆ— -->
    <header class="px-5 pt-3 pb-2 bg-gradient-to-b from-[#f7f7f7] to-[#efefef]
                   shrink-0 z-10 border-b border-gray-200">
      <h1 class="text-lg font-semibold text-gray-900 tracking-tight">
        ç¦å²¡å®¶æ—æ—…éŠè¡Œç¨‹
      </h1>
      <p class="text-xs text-gray-500 mt-1">
        å·¦å³æ»‘å‹•åˆ‡æ›æ—¥æœŸï¼Œé»è¡Œç¨‹ï¼Œä¸‹æ–¹æœƒå½ˆå‡ºè©³ç´°è£œå……èªªæ˜ã€‚
      </p>

      <!-- æ—¥æœŸæ»‘å‹• -->
      <div class="mt-3 flex gap-2 overflow-x-auto scrollbar-hide pb-1">
        <button
          v-for="(day, index) in days"
          :key="day.id"
          class="shrink-0 w-32 px-3 py-2 rounded-2xl text-left border
                 transition-all duration-150"
          :class="day.id === selectedDayId
            ? 'bg-[#DCDFF0] text-gray-900 border-gray-900 shadow-md'
            : 'bg-[#E6E6E6] text-gray-700 border-gray-300 hover:border-gray-500'"
          @click="selectDay(day.id)"
        >
          <div class="flex items-center justify-between">
            <span class="text-[12px] uppercase tracking-widest font-semibold text-gray-800">
              Day {{ index + 1 }}
            </span>
            <span v-if="dayWeathers[index]" class="text-[11px] text-gray-600">
              {{ weatherEmoji(dayWeathers[index].code) }}
            </span>
          </div>
          <div class="text-[12px] mt-0.5 text-gray-800 font-medium">
            {{ day.dateLabel }}
          </div>
          <div v-if="dayWeathers[index]" class="mt-1 text-[11px] text-gray-700">
            <span class="font-semibold text-gray-900">
              {{ Math.round(dayWeathers[index].max) }}Â°
            </span>
            / {{ Math.round(dayWeathers[index].min) }}Â°C
          </div>
          <div v-else class="mt-1 text-[11px] text-gray-500">
            è®€å–ä¸­â€¦
          </div>
        </button>
      </div>
    </header>

    <!-- ====================== -->
    <!-- è¡Œç¨‹åˆ—è¡¨ï¼ˆå…§éƒ¨å¯æ²å‹•ï¼‰ -->
    <!-- ====================== -->
    <main class="flex-1 overflow-y-auto scrollbar-hide px-4 py-3">

      <!-- è¡Œç¨‹å¡ç‰‡ -->
      <div
        v-for="evt in filteredEvents"
        :key="evt.id"
        class="relative flex items-start gap-3 rounded-lg border border-gray-100
               card-shadow mb-3 active:scale-[0.98] cursor-pointer transition"
        :class="evt.type === 'transit' ? 'p-2' : 'p-3'"
        :style="{ backgroundColor: cardBgColor(evt.type) }"
        @click="openSheet(evt)"
      >
        <!-- å·¦å´ ICON -->
        <div class="text-[18px] flex items-center"
             :style="{ color: iconColor(evt.type) }">
          {{ typeIcon(evt.type) }}
        </div>

        <!-- å·¦å´è‰²æ¢ï¼ˆä¸­é–“ç•™ 8px é–“è·æ„Ÿï¼‰ -->
        <div class="w-1.5 rounded-full mt-1 ml-2"
             :style="{ backgroundColor: typeColor(evt.type) }">
        </div>

        <!-- å³å´å…§å®¹ -->
        <div class="flex-1 ml-2">
          <div class="flex items-center justify-between">
            <div
              class="font-semibold text-gray-900 tracking-tight"
              :class="evt.type === 'transit' ? 'text-[14px]' : 'text-[15px]'"
            >
              {{ evt.time }}
            </div>

            <span
              class="text-[11px] px-2 py-0.5 rounded-lg font-medium"
              :style="{
                backgroundColor: tagBgColor(evt.type),
                color: tagTextColor(evt.type)
              }"
            >
              {{ typeLabel(evt.type) }}
            </span>
          </div>

          <div
            class="mt-1 text-gray-800 font-medium"
            :class="evt.type === 'transit' ? 'text-[13px]' : 'text-[14px]'"
          >
            {{ evt.title }}
          </div>
        </div>
      </div>

      <!-- æ–°å¢è¡Œç¨‹ -->
      <button
        class="w-full bg-white border border-gray-300
               text-gray-700 rounded-lg py-3 mt-4 text-[14px]
               font-medium shadow-sm active:scale-[0.98]"
        @click="createNewEvent"
      >
        ï¼‹ æ–°å¢è¡Œç¨‹
      </button>

    </main>

    <!-- ============================== -->
    <!--        ä¸‹æ–¹è³‡è¨Šé¢æ¿           -->
    <!-- ============================== -->
    <transition name="sheet">
      <div v-if="activeEvent"
        class="absolute bottom-0 left-0 right-0
               bg-white rounded-t-3xl shadow-xl
               border-t border-gray-200 p-5 z-40"
        style="height: 45%;">

        <!-- ä¸Šæ–¹æŒ‰éˆ•åˆ— -->
        <div class="flex items-center gap-3 mb-4">
          <a
            :href="googleMapsUrl(activeEvent)"
            target="_blank"
            class="flex-1 text-center py-2 rounded-xl text-white
                   font-semibold text-[14px] shadow-sm active:scale-[0.98]"
            style="background-color: #3E6F61;">
            åœ¨ Google Maps é–‹å•Ÿ
          </a>

          <button
            @click.stop="openEdit(activeEvent)"
            class="w-24 text-center py-2 rounded-xl border
                   border-gray-300 bg-gray-100 text-gray-700
                   font-semibold text-[14px] active:scale-[0.98]"
          >
            ç·¨è¼¯
          </button>
        </div>

        <!-- æ–‡å­—å…§å®¹ -->
        <div class="overflow-y-auto pr-1 h-[calc(100%-70px)]
                    text-[14px] leading-relaxed scrollbar-hide">
          <div v-if="activeEvent.note" class="mb-4">
            <div class="text-[13px] font-semibold text-gray-800 mb-1">å‚™è¨» Notes</div>
            <div class="whitespace-pre-line text-gray-700">
              {{ activeEvent.note }}
            </div>
          </div>

          <div v-if="activeEvent.highlights && activeEvent.highlights.length" class="mb-3">
            <div class="text-[13px] font-semibold text-gray-800 mb-1">äº®é» Highlights</div>
            <ul class="list-disc pl-5 text-gray-700">
              <li v-for="(hl, idx) in activeEvent.highlights" :key="idx">
                {{ hl }}
              </li>
            </ul>
          </div>

          <div
            v-if="!activeEvent.note && (!activeEvent.highlights || !activeEvent.highlights.length)"
            class="text-gray-500 text-[13px]">
            ç„¡è£œå……èªªæ˜
          </div>
        </div>
      </div>
    </transition>

    <!-- ============================== -->
    <!--           ç·¨è¼¯é¢æ¿            -->
    <!-- ============================== -->
    <transition name="sheet">
      <div v-if="editingEvent"
        class="absolute bottom-0 left-0 right-0
               bg-white rounded-t-3xl shadow-xl border-t border-gray-200
               p-5 z-50"
        style="height: 60%;">

        <h2 class="text-[16px] font-semibold text-gray-900 mb-4">
          ç·¨è¼¯è¡Œç¨‹
        </h2>

        <div class="flex flex-col gap-3 h-[calc(100%-40px)]
                    overflow-y-auto pr-2">

          <div>
            <label class="text-[13px] font-semibold text-gray-700">æ™‚é–“</label>
            <input type="text" v-model="editingEvent.time"
              class="w-full mt-1 px-3 py-2 rounded-lg border
                     border-gray-300 text-[14px]">
          </div>

          <div>
            <label class="text-[13px] font-semibold text-gray-700">æ¨™é¡Œ</label>
            <input type="text" v-model="editingEvent.title"
              class="w-full mt-1 px-3 py-2 rounded-lg border
                     border-gray-300 text-[14px]">
          </div>

          <div>
            <label class="text-[13px] font-semibold text-gray-700">è¡Œç¨‹é¡å‹</label>
            <select v-model="editingEvent.type"
              class="w-full mt-1 px-3 py-2 rounded-lg border
                     border-gray-300 text-[14px]">
              <option value="flight">âœˆï¸ é£›æ©Ÿ</option>
              <option value="transit">ğŸš— è»Šç¨‹</option>
              <option value="stay">ğŸ“ åœç•™</option>
            </select>
          </div>

          <div>
            <label class="text-[13px] font-semibold text-gray-700">å‚™è¨» Notes</label>
            <textarea v-model="editingEvent.note" rows="3"
              class="w-full mt-1 px-3 py-2 rounded-lg border
                     border-gray-300 text-[14px]"></textarea>
          </div>

          <div>
            <label class="text-[13px] font-semibold text-gray-700">äº®é»ï¼ˆæ¯è¡Œä¸€é …ï¼‰</label>
            <textarea v-model="editingEvent.highlightsText" rows="3"
              class="w-full mt-1 px-3 py-2 rounded-lg border
                     border-gray-300 text-[14px]"></textarea>
          </div>

        </div>

        <div class="mt-3 flex gap-3">
          <button
            @click="saveEdit"
            class="flex-1 py-2 rounded-xl text-white font-semibold
                   text-[14px] active:scale-[0.98]"
            style="background-color: #3E6F61;"
          >
            å„²å­˜
          </button>

          <button
            @click="cancelEdit"
            class="w-24 py-2 rounded-xl border border-gray-300
                   bg-gray-100 text-gray-700 font-semibold text-[14px]
                   active:scale-[0.98]"
          >
            å–æ¶ˆ
          </button>
        </div>

      </div>
    </transition>

  </div>
</div>

<script>
const { createApp } = Vue;

createApp({
  data() {
    return {
      selectedDayId: 1,
      activeEvent: null,
      editingEvent: null,

      days: [
        { id: 1, dateLabel: "12/20ï¼ˆå…­ï¼‰" },
        { id: 2, dateLabel: "12/21ï¼ˆæ—¥ï¼‰" },
        { id: 3, dateLabel: "12/22ï¼ˆä¸€ï¼‰" },
        { id: 4, dateLabel: "12/23ï¼ˆäºŒï¼‰" },
        { id: 5, dateLabel: "12/24ï¼ˆä¸‰ï¼‰" },
      ],

      dayWeathers: [],

      events: [
        /* Day 1 */
        {
          id: 101, day: 1, type: "flight",
          time: "08:00â€“11:15",
          title: "é•·æ¦® BR106 æŠµé”ç¦å²¡",
          note: "å…¥å¢ƒã€å–è¡Œæ",
          highlights: []
        },
        {
          id: 102, day: 1, type: "stay",
          time: "12:00â€“13:30",
          title: "åšå¤šç”ºå±‹ãƒ»æ«›ç”°ç¥ç¤¾",
          note: "",
          highlights: ["åƒè§€è€è¡—", "ç¥‡åœ’å±±ç¬ æ­·å²é¤¨"]
        },
        {
          id: 103, day: 1, type: "transit",
          time: "13:40â€“14:00",
          title: "æ«›ç”°ç¥ç¤¾ â†’ Blossom Hotel",
          note: "",
          highlights: []
        },
        {
          id: 104, day: 1, type: "stay",
          time: "14:00â€“16:30",
          title: "JR ä¹å· Blossom é£¯åº— Check-in",
          note: "å¯„æ”¾è¡Œæ & é™„è¿‘è¦“é£Ÿ",
          highlights: []
        },
        {
          id: 105, day: 1, type: "stay",
          time: "16:30â€“20:00",
          title: "åšå¤šé‹æ²³åŸ",
          note: "",
          highlights: ["è‡ªç”±æ´»å‹•"]
        },

        /* Day 2 */
        {
          id: 201, day: 2, type: "transit",
          time: "09:30â€“10:00",
          title: "å‰å¾€æµ·ä¹‹ä¸­é“æµ·æ´‹ä¸–ç•Œ",
          note: "",
          highlights: []
        },
        {
          id: 202, day: 2, type: "stay",
          time: "10:00â€“14:00",
          title: "æµ·ä¹‹ä¸­é“æµ·æ´‹ä¸–ç•Œ Marine World",
          note: "12:00â€“13:00 Reilly æµ·æ™¯é¤å»³ï¼ˆæå‰ 10 åˆ†é˜å¡ä½ï¼‰",
          highlights: ["10:50 æµ·è±¹ Go Go Seal", "11:00 æµ·è±šè¡¨æ¼”", "12:45 ä¼éµéŠè¡Œ"]
        },
        {
          id: 203, day: 2, type: "transit",
          time: "14:00â€“14:30",
          title: "æµ·æ´‹ä¸–ç•Œ â†’ å¤©ç¥ Parco",
          note: "",
          highlights: []
        },
        {
          id: 204, day: 2, type: "stay",
          time: "14:30â€“20:00",
          title: "å¤©ç¥è¡—å€è‡ªç”±æ´»å‹•",
          note: "",
          highlights: ["è³¼ç‰©", "è—¥å¦", "å’–å•¡"]
        },
        {
          id: 205, day: 2, type: "transit",
          time: "20:00â€“20:30",
          title: "å¤©ç¥ â†’ Blossom é£¯åº—",
          note: "",
          highlights: []
        },

        /* Day 3 */
        {
          id: 301, day: 3, type: "stay",
          time: "08:00â€“08:30",
          title: "é£¯åº— Check-out",
          note: "",
          highlights: []
        },
        {
          id: 302, day: 3, type: "transit",
          time: "08:30â€“10:30",
          title: "åšå¤š â†’ ä¹å·è‡ªç„¶å‹•ç‰©åœ’",
          note: "",
          highlights: []
        },
        {
          id: 303, day: 3, type: "stay",
          time: "10:30â€“13:30",
          title: "ä¹å·è‡ªç„¶å‹•ç‰©åœ’ African Safari",
          note: "12:00â€“13:00 åœ’å…§é¤å»³åˆé¤",
          highlights: ["11:00 å¢æ—å·´å£«ï¼ˆ50 åˆ†ï¼‰", "è¦ªå­é«”é©—", "æ‹ç…§"]
        },
        {
          id: 304, day: 3, type: "transit",
          time: "13:30â€“14:00",
          title: "å‹•ç‰©åœ’ â†’ æ¹¯å¸ƒé™¢æ˜­å’Œé¤¨",
          note: "",
          highlights: []
        },
        {
          id: 305, day: 3, type: "stay",
          time: "14:00â€“17:30",
          title: "æ¹¯ã®åªè¡—é“æ•£ç­–ï¼ˆæ¹¯å¸ƒé™¢ï¼‰",
          note: "",
          highlights: ["èŠ±å‰æ‘", "æ¹¯ã®åªæ¨ªä¸", "Snoopy å•†åº—"]
        },
        {
          id: 306, day: 3, type: "transit",
          time: "17:30â€“18:00",
          title: "æ¹¯å¸ƒé™¢ â†’ åˆ¥åºœ",
          note: "",
          highlights: []
        },
        {
          id: 307, day: 3, type: "stay",
          time: "18:00â€“21:00",
          title: "Check-in è¥¿éµ Resort Inn åˆ¥åºœ",
          note: "",
          highlights: ["å‘¨é‚Šç”¨é¤", "è‡ªç”±æ´»å‹•"]
        },

        /* Day 4 */
        {
          id: 401, day: 4, type: "stay",
          time: "10:00â€“10:10",
          title: "Resort Inn åˆ¥åºœ Check-out",
          note: "",
          highlights: []
        },
        {
          id: 402, day: 4, type: "transit",
          time: "10:10â€“12:10",
          title: "åˆ¥åºœ â†’ å¤ªå®°åºœå¤©æ»¿å®®",
          note: "",
          highlights: []
        },
        {
          id: 403, day: 4, type: "stay",
          time: "12:10â€“13:30",
          title: "å¤ªå®°åºœå¤©æ»¿å®® + åƒé“å•†åº—è¡—",
          note: "",
          highlights: ["æ¢…æé¤…", "å¾¡å®ˆ", "å¯æ„›å°åº—"]
        },
        {
          id: 404, day: 4, type: "stay",
          time: "13:30â€“14:30",
          title: "å¤ªå®°åºœå‘¨é‚Šåˆé¤",
          note: "",
          highlights: []
        },
        {
          id: 405, day: 4, type: "stay",
          time: "14:30â€“16:30",
          title: "ä¹å·åœ‹ç«‹åšç‰©é¤¨",
          note: "",
          highlights: []
        },
        {
          id: 406, day: 4, type: "transit",
          time: "17:00â€“18:00",
          title: "å¤ªå®°åºœ â†’ å¤©ç¥æ˜†ç‰¹è–©é…’åº—",
          note: "",
          highlights: []
        },
        {
          id: 407, day: 4, type: "stay",
          time: "18:00â€“19:00",
          title: "Check-in + æ•´ç†ä¼‘æ¯",
          note: "",
          highlights: []
        },
        {
          id: 408, day: 4, type: "stay",
          time: "19:00â€“21:00",
          title: "ç¦å²¡å¡”ï¼ˆæ™šé¤ + å¤œæ™¯ï¼‰",
          note: "",
          highlights: ["å¤•é™½", "å¤œæ™¯"]
        },

        /* Day 5 */
        {
          id: 501, day: 5, type: "stay",
          time: "11:00â€“11:10",
          title: "ç¦å²¡å¤©ç¥æ˜†ç‰¹è–©é…’åº— Check-out",
          note: "",
          highlights: []
        },
        {
          id: 502, day: 5, type: "transit",
          time: "11:10â€“11:20",
          title: "é£¯åº— â†’ éºµåŒ…è¶…äººåšç‰©é¤¨",
          note: "",
          highlights: []
        },
        {
          id: 503, day: 5, type: "stay",
          time: "11:20â€“12:30",
          title: "éºµåŒ…è¶…äººåšç‰©é¤¨",
          note: "",
          highlights: ["å®¤å…§éŠå…·", "æ‹ç…§é»", "å‘¨é‚Šå•†å“"]
        },
        {
          id: 504, day: 5, type: "transit",
          time: "12:30â€“12:50",
          title: "éºµåŒ…è¶…äºº â†’ åšå¤šé˜ªæ€¥",
          note: "",
          highlights: []
        },
        {
          id: 505, day: 5, type: "stay",
          time: "12:50â€“17:30",
          title: "åšå¤šé˜ªæ€¥ï¼ˆåˆé¤ï¼‹è³¼ç‰©ï¼‰",
          note: "",
          highlights: ["Dacomecca", "ç™¾è²¨ç¾é£Ÿ"]
        },
        {
          id: 506, day: 5, type: "transit",
          time: "17:30â€“18:00",
          title: "åšå¤šé˜ªæ€¥ â†’ ç¦å²¡æ©Ÿå ´",
          note: "",
          highlights: []
        },
        {
          id: 507, day: 5, type: "flight",
          time: "20:55â€“22:40",
          title: "é•·æ¦® BR101 å›ç¨‹",
          note: "",
          highlights: []
        },
      ]
    };
  },

  computed: {
    filteredEvents() {
      return this.events.filter(e => e.day === this.selectedDayId);
    }
  },

  methods: {
    selectDay(id) {
      this.selectedDayId = id;
      this.activeEvent = null;
    },

    openSheet(evt) {
      if (this.activeEvent && this.activeEvent.id === evt.id) {
        this.activeEvent = null;
      } else {
        this.activeEvent = evt;
      }
    },

    googleMapsUrl(evt) {
      return "https://www.google.com/maps/search/?api=1&query=" +
        encodeURIComponent(evt.title);
    },

    createNewEvent() {
      this.editingEvent = {
        id: Date.now(),
        day: this.selectedDayId,
        type: "stay",
        time: "",
        title: "",
        note: "",
        highlights: [],
        highlightsText: ""
      };
    },

    openEdit(evt) {
      this.editingEvent = {
        ...evt,
        highlightsText: Array.isArray(evt.highlights)
          ? evt.highlights.join("\n")
          : ""
      };
    },

    saveEdit() {
      this.editingEvent.highlights =
        (this.editingEvent.highlightsText || "")
          .split("\n")
          .map(x => x.trim())
          .filter(x => x);

      const idx = this.events.findIndex(e => e.id === this.editingEvent.id);
      if (idx !== -1) {
        this.events.splice(idx, 1, { ...this.editingEvent });
      } else {
        this.events.push({ ...this.editingEvent });
      }

      localStorage.setItem("trip2025", JSON.stringify(this.events));
      this.editingEvent = null;
    },

    cancelEdit() {
      this.editingEvent = null;
    },

    /* ICON é¡è‰² + ç¨®é¡ */
    typeIcon(t) {
      if (t === "flight") return "âœˆï¸";
      if (t === "transit") return "ğŸš—";
      return "ğŸ“";
    },
    iconColor(t) {
      if (t === "flight") return "#6B46A3";
      if (t === "transit") return "#3E6F61";
      return "#375A7F";
    },

    /* å¡ç‰‡èƒŒæ™¯è‰²ï¼ˆæ·¡è«è˜­è¿ªè‰²å¡Šï¼‰ */
    cardBgColor(t) {
      if (t === "flight") return "#E8E1EE";   // æ·¡ç´«
      if (t === "transit") return "#DFE5E2";  // ç¶ ç°
      return "#E2E6F2";                       // è—ç°
    },

    /* å·¦å´è‰²æ¢é¡è‰²ï¼ˆåŒè‰²ç³»ç•¥æ·±ï¼‰ */
    typeColor(t) {
      if (t === "flight") return "#C9BBD9";
      if (t === "transit") return "#C5D2CD";
      return "#C2C9DA";
    },

    tagBgColor(t) {
      if (t === "flight") return "#F3ECFA";
      if (t === "transit") return "#E9F3EE";
      return "#E9EDF7";
    },

    tagTextColor(t) {
      if (t === "flight") return "#6B46A3";
      if (t === "transit") return "#3E6F61";
      return "#375A7F";
    },

    typeLabel(t) {
      if (t === "flight") return "âœˆï¸ é£›æ©Ÿ";
      if (t === "transit") return "ğŸš— è»Šç¨‹";
      return "ğŸ“ åœç•™";
    },

    weatherEmoji(code) {
      if (code === 0) return "â˜€ï¸";
      if (code <= 3) return "â›…ï¸";
      if (code <= 45) return "ğŸŒ«";
      if (code <= 55) return "ğŸŒ¦";
      if (code <= 65) return "ğŸŒ§";
      if (code <= 75) return "â„ï¸";
      return "ğŸŒ§";
    },

    async loadWeather() {
      try {
        const res = await fetch(
          "https://api.open-meteo.com/v1/forecast" +
          "?latitude=33.590&longitude=130.401" +
          "&daily=weathercode,temperature_2m_max,temperature_2m_min" +
          "&timezone=Asia%2FTokyo"
        );
        const data = await res.json();
        this.dayWeathers = data.daily.time.map((t, i) => ({
          date: t,
          code: data.daily.weathercode[i],
          max: data.daily.temperature_2m_max[i],
          min: data.daily.temperature_2m_min[i],
        })).slice(0, 5);
      } catch (e) {
        console.error("Weather fetch failed", e);
      }
    }
  },

  mounted() {
    this.loadWeather();
    const saved = localStorage.getItem("trip2025");
    if (saved) {
      try {
        this.events = JSON.parse(saved);
      } catch (e) {
        console.error("load local events failed", e);
      }
    }
  }
}).mount("#app");
</script>

</body>
</html>
